<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Planning Nathan</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      --bg: #0f172a;
      --card: #111827;
      --accent: #38bdf8;
      --accent-soft: #0ea5e9;
      --text: #e5e7eb;
      --muted: #9ca3af;
      --sport: #22c55e;
      --music: #f97316;
      --english: #a855f7;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    body {
      background: radial-gradient(circle at top, #1e293b 0, #020617 55%);
      color: var(--text);
      min-height: 100vh;
      padding: 24px;
      display: flex;
      justify-content: center;
    }

    .app {
      width: 100%;
      max-width: 1100px;
    }

    h1 {
      font-size: 1.8rem;
      margin-bottom: 0.25rem;
    }

    .subtitle {
      color: var(--muted);
      margin-bottom: 1.5rem;
    }

    .summary {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      margin-bottom: 20px;
    }

    .badge {
      padding: 8px 14px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(148, 163, 184, 0.4);
      font-size: 0.85rem;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .dot {
      width: 10px;
      height: 10px;
      border-radius: 999px;
    }

    .dot.sport { background: var(--sport); }
    .dot.music { background: var(--music); }
    .dot.english { background: var(--english); }

    .grid {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 14px;
    }

    @media (max-width: 900px) {
      .grid {
        grid-template-columns: 1fr;
      }
    }

    .day-card {
      background: linear-gradient(145deg, rgba(15,23,42,0.95), rgba(15,23,42,0.7));
      border-radius: 16px;
      padding: 14px 14px 10px;
      border: 1px solid rgba(148, 163, 184, 0.35);
      box-shadow: 0 18px 40px rgba(15, 23, 42, 0.8);
      backdrop-filter: blur(16px);
    }

    .day-header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      margin-bottom: 8px;
    }

    .day-name {
      font-weight: 600;
      letter-spacing: 0.04em;
      text-transform: uppercase;
      font-size: 0.8rem;
      color: var(--muted);
    }

    .day-tag {
      font-size: 0.7rem;
      padding: 3px 8px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.4);
      color: var(--muted);
    }

    .slot {
      margin-top: 8px;
      padding-top: 8px;
      border-top: 1px dashed rgba(55, 65, 81, 0.8);
    }

    .slot-label {
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--muted);
      margin-bottom: 4px;
    }

    .activity {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 6px 8px;
      border-radius: 10px;
      margin-bottom: 4px;
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(31, 41, 55, 0.9);
    }

    .activity-label {
      font-size: 0.8rem;
    }

    .activity-tag {
      font-size: 0.7rem;
      padding: 2px 6px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.4);
      color: var(--muted);
    }

    .activity-tag.sport { border-color: var(--sport); color: var(--sport); }
    .activity-tag.music { border-color: var(--music); color: var(--music); }
    .activity-tag.english { border-color: var(--english); color: var(--english); }

    .activity-time {
      font-size: 0.7rem;
      color: var(--muted);
    }

    input[type="checkbox"] {
      width: 16px;
      height: 16px;
      accent-color: var(--accent);
      cursor: pointer;
    }

    .footer {
      margin-top: 22px;
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      align-items: center;
      justify-content: space-between;
    }

    .totals {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      font-size: 0.85rem;
    }

    .total-pill {
      padding: 6px 10px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(148, 163, 184, 0.4);
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .total-pill span.value {
      font-weight: 600;
      color: var(--accent-soft);
    }

    .reset-btn {
      padding: 6px 12px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.6);
      background: transparent;
      color: var(--muted);
      font-size: 0.8rem;
      cursor: pointer;
    }

    .reset-btn:hover {
      border-color: var(--accent);
      color: var(--accent);
    }
  </style>
</head>
<body>
  <div class="app">
    <h1>Planning semaine â€” Nathan</h1>
    <div class="subtitle">Sport cohÃ©rent, 4 h de musique et 5 h dâ€™anglais du lundi au vendredi.</div>

    <div class="summary">
      <div class="badge"><span class="dot sport"></span>Sport rÃ©parti (bas / haut / cardio / escalade)</div>
      <div class="badge"><span class="dot music"></span>Musique / chant : objectif 4 h</div>
      <div class="badge"><span class="dot english"></span>Anglais : objectif 5 h (TOEIC)</div>
    </div>

    <div class="grid" id="week-grid">
      <!-- Les cartes jours seront injectÃ©es en JS -->
    </div>

    <div class="footer">
      <div class="totals">
        <div class="total-pill">
          ðŸŽµ Musique / chant : <span class="value" id="music-hours">0</span> h / 4 h
        </div>
        <div class="total-pill">
          ðŸ‡¬ðŸ‡§ Anglais : <span class="value" id="english-hours">0</span> h / 5 h
        </div>
      </div>
      <button class="reset-btn" id="reset-btn">RÃ©initialiser la semaine</button>
    </div>
  </div>

  <script>
    const weekData = [
      {
        day: "Lundi",
        tag: "Bas du corps + crÃ©atif",
        slots: [
          {
            label: "Midi",
            activities: [
              { name: "Abdos + jambes", type: "sport", duration: 1 }
            ]
          },
          {
            label: "Soir",
            activities: [
              { name: "Musique / chant (session douce)", type: "music", duration: 1 },
              { name: "Anglais â€” Ã©coute + vocabulaire", type: "english", duration: 0.5 }
            ]
          }
        ]
      },
      {
        day: "Mardi",
        tag: "Escalade",
        slots: [
          {
            label: "Midi",
            activities: [
              { name: "Course (optionnel)", type: "sport", duration: 1 }
            ]
          },
          {
            label: "Soir",
            activities: [
              { name: "Escalade", type: "sport", duration: 2 },
              { name: "Anglais â€” comprÃ©hension orale", type: "english", duration: 0.75 }
            ]
          }
        ]
      },
      {
        day: "Mercredi",
        tag: "Musique intense",
        slots: [
          {
            label: "Midi",
            activities: [
              { name: "Natation (rÃ©cup active, futur)", type: "sport", duration: 0.75 }
            ]
          },
          {
            label: "Soir",
            activities: [
              { name: "Musique / chant (grosse session)", type: "music", duration: 2 },
              { name: "Anglais â€” lecture + grammaire", type: "english", duration: 0.5 }
            ]
          }
        ]
      },
      {
        day: "Jeudi",
        tag: "Haut du corps + mix",
        slots: [
          {
            label: "Midi",
            activities: [
              { name: "Muscu poids du corps (haut du corps)", type: "sport", duration: 1 }
            ]
          },
          {
            label: "Soir",
            activities: [
              { name: "Musique / chant", type: "music", duration: 1 },
              { name: "Anglais â€” TOEIC ciblÃ©", type: "english", duration: 1 }
            ]
          }
        ]
      },
      {
        day: "Vendredi",
        tag: "Cardio + Anglais fort",
        slots: [
          {
            label: "Midi",
            activities: [
              { name: "Course ou vÃ©lo", type: "sport", duration: 1 }
            ]
          },
          {
            label: "Soir",
            activities: [
              { name: "Anglais â€” grammaire + exos", type: "english", duration: 1 },
              { name: "Anglais â€” Ã©coute + test blanc", type: "english", duration: 1 },
              { name: "Anglais â€” Ã©coute passive (podcast)", type: "english", duration: 0.25 }
            ]
          }
        ]
      }
    ];

    const grid = document.getElementById("week-grid");
    const musicHoursEl = document.getElementById("music-hours");
    const englishHoursEl = document.getElementById("english-hours");
    const resetBtn = document.getElementById("reset-btn");

    function createDayCard(dayData, dayIndex) {
      const card = document.createElement("div");
      card.className = "day-card";

      const header = document.createElement("div");
      header.className = "day-header";

      const name = document.createElement("div");
      name.className = "day-name";
      name.textContent = dayData.day;

      const tag = document.createElement("div");
      tag.className = "day-tag";
      tag.textContent = dayData.tag;

      header.appendChild(name);
      header.appendChild(tag);
      card.appendChild(header);

      dayData.slots.forEach((slot, slotIndex) => {
        const slotDiv = document.createElement("div");
        slotDiv.className = "slot";

        const slotLabel = document.createElement("div");
        slotLabel.className = "slot-label";
        slotLabel.textContent = slot.label;
        slotDiv.appendChild(slotLabel);

        slot.activities.forEach((act, actIndex) => {
          const activityDiv = document.createElement("div");
          activityDiv.className = "activity";

          const checkbox = document.createElement("input");
          checkbox.type = "checkbox";
          checkbox.dataset.type = act.type;
          checkbox.dataset.duration = act.duration;
          checkbox.dataset.key = `${dayIndex}-${slotIndex}-${actIndex}`;

          const labelDiv = document.createElement("div");
          const title = document.createElement("div");
          title.className = "activity-label";
          title.textContent = act.name;

          const meta = document.createElement("div");
          meta.style.display = "flex";
          meta.style.gap = "6px";
          meta.style.alignItems = "center";

          const tagSpan = document.createElement("span");
          tagSpan.className = `activity-tag ${act.type}`;
          tagSpan.textContent =
            act.type === "sport" ? "Sport" :
            act.type === "music" ? "Musique" :
            "Anglais";

          const timeSpan = document.createElement("span");
          timeSpan.className = "activity-time";
          timeSpan.textContent = `${act.duration} h`;

          meta.appendChild(tagSpan);
          meta.appendChild(timeSpan);

          labelDiv.appendChild(title);
          labelDiv.appendChild(meta);

          activityDiv.appendChild(checkbox);
          activityDiv.appendChild(labelDiv);
          slotDiv.appendChild(activityDiv);
        });

        card.appendChild(slotDiv);
      });

      return card;
    }

    function renderWeek() {
      grid.innerHTML = "";
      weekData.forEach((day, i) => {
        const card = createDayCard(day, i);
        grid.appendChild(card);
      });

      // Restaurer l'Ã©tat depuis localStorage
      const saved = JSON.parse(localStorage.getItem("planning-state") || "{}");
      document.querySelectorAll('input[type="checkbox"]').forEach(cb => {
        const key = cb.dataset.key;
        if (saved[key]) cb.checked = true;
      });

      updateTotals();
      attachListeners();
    }

    function updateTotals() {
      let music = 0;
      let english = 0;

      document.querySelectorAll('input[type="checkbox"]').forEach(cb => {
        if (!cb.checked) return;
        const type = cb.dataset.type;
        const duration = parseFloat(cb.dataset.duration || "0");
        if (type === "music") music += duration;
        if (type === "english") english += duration;
      });

      musicHoursEl.textContent = music.toFixed(2).replace(".00", "");
      englishHoursEl.textContent = english.toFixed(2).replace(".00", "");
    }

    function attachListeners() {
      document.querySelectorAll('input[type="checkbox"]').forEach(cb => {
        cb.addEventListener("change", () => {
          const saved = JSON.parse(localStorage.getItem("planning-state") || "{}");
          saved[cb.dataset.key] = cb.checked;
          localStorage.setItem("planning-state", JSON.stringify(saved));
          updateTotals();
        });
      });

      resetBtn.addEventListener("click", () => {
        document.querySelectorAll('input[type="checkbox"]').forEach(cb => cb.checked = false);
        localStorage.removeItem("planning-state");
        updateTotals();
      });
    }

    renderWeek();
  </script>
</body>
</html>
